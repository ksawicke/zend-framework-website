<h4><?php echo $payrollViewName; ?> Queue</h4>

<br />

<?php
$isPayrollAdmin = \Login\Helper\UserSession::getUserSessionVariable( 'IS_PAYROLL_ADMIN' );
$isPayrollAssistant = \Login\Helper\UserSession::getUserSessionVariable( 'IS_PAYROLL_ASSISTANT' );
$isLoggedInUserPayroll = ( ( $isPayrollAdmin || $isPayrollAssistant ) ? "Y" : "N" );
if($isLoggedInUserPayroll==="Y") { ?>

<?php if( $this->payrollView === 'by-status' ) { ?>
<table border="0" cellspacing="5" cellpadding="5" style="float:right;">
    <tbody>
        <tr>
            <td style="border:0px solid #fff;">Days requested are between <input type="text" id="startDate" name="startDate" value="" placeholder="Start Date" style="border:1px solid #ccc;"> and <input type="text" id="endDate" name="endDate" value="" placeholder="End Date" style="border:1px solid #ccc;">
            </td>
        </tr>
    </tbody>
</table>
<br style="clear:both;" />
<script>
$( "#startDate" ).datepicker({
  dateFormat: "yy-mm-dd"
});
$( "#endDate" ).datepicker({
  dateFormat: "yy-mm-dd"
});
$( "#startDate" ).on( 'blur', function() {
    reloadByStatusDT();
});
$( "#endDate" ).on( 'blur', function() {
    reloadByStatusDT();
});
var reloadByStatusDT = function() {
    var table = $('#payroll-queue-by-status').DataTable();
    table.ajax.reload();
}
</script>
<?php } ?>
<table id="payroll-queue-<?php echo $this->payrollView; ?>" class="display" style="width:100%;">
    <thead>
        <tr>
            <th>Employee</th>
            <th>Approver queue</th>
            <th>Request Status</th>
            <th>Hours Requested</th>
            <th>Request Reason</th>
            <th>First Day<br />Requested</th>
            <th>Actions</th>
        </tr>
    </thead>
</table>

<?php if( $this->payrollView === 'manager-action' ) { ?>
    <a href="<?php echo $this->basePath(); ?>/request/download-report-manager-action-needed"><img src="<?php echo $this->basePath(); ?>/img/excel_logo_32x32.png">&nbsp;&nbsp;Download Report in Excel</a>
<?php } ?>

<?php } else { ?>

<div class="alert alert-danger" role="alert">
	<span class="glyphicon glyphicon-warning-sign pull-left" aria-hidden="true"></span>&nbsp;&nbsp;
	<strong>You do not have access to this page.</strong>
</div>

<?php } ?>

<script type="text/javascript" src="<?php echo $this->basePath( 'js/datatables/datatables.js'); ?>"></script>
<script type="text/javascript" src="<?php echo $this->basePath( 'js/request/timeOffPayrollQueueHandler.js'); ?>"></script>